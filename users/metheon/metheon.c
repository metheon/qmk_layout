#include "metheon.h"

layer_state_t layer_state_set_user(layer_state_t state) {
    return update_tri_layer_state(state, _LOWER, _RAISE, _ADJUST);
};

void matrix_scan_user(void) {
    matrix_scan_encoders();
    matrix_scan_leader();
}

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [_BASE] = LAYOUT_metheon(
    //  .--------------------------------------------.                    .--------------------------------------------.
         DK_Q    ,DK_W    ,DK_F    ,DK_P    ,DK_G                         ,DK_J    ,DK_L    ,DK_U    ,DK_Y    ,DK_QUOT ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         HOME_A  ,HOME_R  ,HOME_S ,HOME_T   ,DK_D                         ,DK_H    ,HOME_N  ,HOME_E  ,HOME_I  ,HOME_O  ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         DK_Z    ,DK_X    ,DK_C    ,DK_V    ,DK_B                         ,DK_K    ,DK_M    ,KC_COMMA,KC_DOT  ,DK_MINS ,
    //  '-------------------------+--------+---------+--------+  +--------+--------+--------+--------------------------'
                                   TAB_LWR ,SPC_EXT  ,ENT_RSE    ,DEL_RSE ,BSPC_EXT,ESC_LWR ,
    //                            '--------+---------+--------+  +--------+--------+--------'
    //  Encoders
    //  .--------+-------.
         BSE_E01 ,BSE_E02
    //  '--------+-------'
    ),
    [_LOWER] = LAYOUT_metheon(
    //  .--------------------------------------------.                    .--------------------------------------------.
         __NONE__,KC_9    ,KC_F8   ,KC_7    ,KC_F12                       ,DK_ASTR ,DK_7    ,DK_8    ,DK_9    ,DK_SLSH ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         HOME_LP ,HOME_F6 ,HOME_F5,HOME_F4  ,KC_F11                       ,DK_PLUS ,HOME_4  ,HOME_5  ,HOME_6  ,HOME_MN ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         DK_RPRN ,KC_F3   ,KC_F2   ,KC_F1   ,KC_F10                       ,DK_0    ,DK_1    ,DK_2    ,DK_3    ,DK_EQL  ,
    //  '-------------------------+--------+---------+--------+  +--------+--------+--------+--------------------------'
                                   _______ ,_______ ,_______     ,_______ ,_______ ,_______ ,
    //                            '--------+---------+--------+  +--------+--------+--------'
    //  Encoders
    //  .--------+-------.
         LWR_E01 ,LWR_E02
    //  '--------+-------'
    ),
    [_RAISE] = LAYOUT_metheon(
    //  .--------------------------------------------.                    .--------------------------------------------.
         DK_CIRC ,DK_DIAE ,DK_HASH ,DK_TILD ,DK_LCBR                      ,DK_RCBR ,DK_DLR  ,DK_EUR  ,DK_SLSH ,DK_BSLS ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         DK_AT   ,DK_AE   ,DK_OE   ,DK_AA   ,DK_LPRN                      ,DK_RPRN ,DK_EQL  ,DK_EXLM ,DK_AMPR ,DK_PIPE ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         DK_PERC ,DK_LABK ,DK_RABK ,DK_QUES ,DK_LBRC                      ,DK_RBRC ,DK_DQUO ,DK_GRV  ,__NONE__,__NONE__,
    //  '-------------------------+--------+---------+--------+  +--------+--------+--------+--------------------------'
                                   _______ ,_______ ,_______     ,_______ ,_______ ,_______ ,
    //                            '--------+---------+--------+  +--------+--------+--------'
    //  Encoders
    //  .--------+-------.
         RSE_E01 ,RSE_E02
    //  '--------+-------'
    ),
    [_ADJUST] = LAYOUT_metheon(
    //  .--------------------------------------------.                    .--------------------------------------------.
         __NONE__,__NONE__,__NONE__,__NONE__,__NONE__                     ,__NONE__,KC_FLASH,KC_MAKE ,KC_VRSN ,__NONE__,
    //  |--------------------------------------------|                    |--------------------------------------------|
         KC_CAPS ,KC_MPRV ,KC_MPLY ,KC_MNXT ,__NONE__                     ,RGB_TOG ,RGB_MOD ,RGB_HUI ,RGB_SAI ,RGB_VAI ,
    //  |--------------------------------------------|                    |--------------------------------------------|
         __NONE__,KC_MUTE ,KC_VOLD ,KC_VOLU ,__NONE__                     ,__NONE__,RGB_RMOD,RGB_HUD ,RGB_SAD ,RGB_VAD ,
    //  '-------------------------+--------+---------+--------+  +--------+--------+--------+--------------------------'
                                   _______ ,RESET    ,_______    ,_______ ,RESET   ,_______ ,
    //                            '--------+---------+--------+  +--------+--------+--------'
    //  Encoders
    //  .--------+-------.
         ADJ_E01 ,ADJ_E02
    //  '--------+-------'
    ),
    [_EXTEND] = LAYOUT_metheon(
    //  .--------------------------------------------.                    .--------------------------------------------.
         __NONE__,__NONE__,__NONE__,__NONE__,__NONE__                     ,KC_PGUP ,KC_HOME ,KC_UP   ,KC_END  ,__NONE__,
    //  |--------------------------------------------|                    |--------------------------------------------|
         KC_LGUI ,KC_LALT ,KC_LSFT ,KC_LCTRL,KC_LEAD                      ,KC_PGDN ,KC_LEFT ,KC_DOWN ,KC_RGHT ,__NONE__,
    //  |--------------------------------------------|                    |--------------------------------------------|
         UNDO    ,CUT     ,COPY    ,PASTE   ,REDO                         ,__NONE__,__NONE__,__NONE__,__NONE__,__NONE__,
    //  '-------------------------+--------+---------+--------+  +--------+--------+--------+--------------------------'
                                   _______ ,_______  ,_______    ,_______ ,_______ ,_______ ,
    //                            '--------+---------+--------+  +--------+--------+--------'
    //  Encoders
    //  .--------+-------.
         EXT_E01 ,EXT_E02
    //  '--------+-------'
    )
};
// clang-format on
